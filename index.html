<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>Juego de Acciones - App</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0b5cff" />

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body { font-family: system-ui, Arial, sans-serif; margin: 12px; max-width: 1100px; }
    header{display:flex;align-items:center;gap:12px}
    .controls { display:flex; gap:8px; margin:12px 0; flex-wrap:wrap; }
    .player-card{border:1px solid #ddd;padding:8px;border-radius:8px;margin:6px;min-width:150px}
    #players-area{display:flex;flex-wrap:wrap}
    .bottom { margin-top:18px; }
    button{padding:8px 12px;border-radius:8px;border:1px solid #ccc;background:white;cursor:pointer}
    #chart-container{max-width:800px;margin-top:12px}
  </style>
</head>
<body>
  <header>
    <img src="icon-192.png" alt="" width="48" height="48"/>
    <h1>Juego de Acciones — App</h1>
  </header>

  <div class="controls">
    <label>Jugadores:
      <select id="player-count">
        <option>2</option><option>3</option><option>4</option><option>5</option><option selected>6</option>
      </select>
    </label>
    <button id="start-btn">Iniciar partida</button>
    <button id="next-turn">Siguiente turno</button>
    <button id="undo-btn">Deshacer</button>
    <button id="save-manual">Guardar partida ahora</button>
    <button id="clear-saved">Borrar guardado</button>
    <button id="end-game">Finalizar partida (ver gráfico)</button>
  </div>

  <div id="players-area"></div>

  <div class="bottom">
    <h3>Partidas guardadas localmente</h3>
    <ul id="saved-list"></ul>
  </div>

  <div id="chart-container" style="display:none">
    <h3>Gráfico final - Oro por jugador</h3>
    <canvas id="finalChart" width="800" height="400"></canvas>
    <div style="margin-top:8px">
      <button id="export-png">Exportar PNG</button>
      <button id="download-json">Descargar JSON</button>
    </div>
  </div>

  <script src="app.js"></script>

  <!-- register service worker -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').catch(console.error);
    }
  </script>
</body>
</html>
